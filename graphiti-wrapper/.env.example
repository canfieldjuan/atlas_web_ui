# Graphiti Wrapper Configuration
# Copy this to .env.local and fill in your values

# LLM for entity extraction
OPENAI_API_KEY=your-openai-api-key-here
MODEL_NAME=gpt-4o-mini

# Neo4j Configuration
# Local Neo4j
# NEO4J_URI=bolt://localhost:7687
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=your-password

# AuraDB (Production)
NEO4J_URI=neo4j+s://your-instance.databases.neo4j.io
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password

# Embedder Configuration - OpenAI (production default)
EMBEDDER_PROVIDER=openai
EMBEDDER_MODEL=text-embedding-3-small
EMBEDDER_EMBEDDING_DIM=1536

# For local development with Ollama, uncomment these:
# EMBEDDER_BASE_URL=http://localhost:11434/v1
# EMBEDDER_MODEL=mxbai-embed-large
# EMBEDDER_EMBEDDING_DIM=1024
# EMBEDDER_API_KEY=ollama

# ============================================
# Query Processing Configuration
# ============================================

# Skip search for tool-specific queries (math, datetime, web search)
GRAPHRAG_SKIP_MATH_QUERIES=true
GRAPHRAG_SKIP_DATETIME_QUERIES=true
GRAPHRAG_SKIP_WEBSEARCH_QUERIES=true

# Temporal classification - default "latest" window in days
GRAPHRAG_TEMPORAL_LATEST_DAYS=30

# ============================================
# Reranking Configuration
# ============================================

# Reranker type: heuristic (default), cross-encoder, or none
GRAPHRAG_RERANKER_TYPE=heuristic

# Heuristic reranker weights
GRAPHRAG_RERANK_EXACT_MATCH_BOOST=0.2
GRAPHRAG_RERANK_TOKEN_OVERLAP_WEIGHT=0.15
GRAPHRAG_RERANK_RECENCY_MAX_BOOST=0.1
GRAPHRAG_RERANK_RECENCY_DECAY_DAYS=365

# Cross-encoder reranker (loads model in-process, requires sentence-transformers)
# GRAPHRAG_CROSSENCODER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# ============================================
# Fallback Search Configuration
# ============================================

# Enable fallback when graph search returns few results
GRAPHRAG_FALLBACK_ENABLED=true
# Strategy: cascade (try vector then keyword), vector, keyword
GRAPHRAG_FALLBACK_STRATEGY=cascade
# Trigger fallback if results below this threshold
GRAPHRAG_FALLBACK_MIN_RESULTS=3

# PostgreSQL connection for fallback search (optional)
# If not configured, fallback will be disabled
# GRAPHRAG_FALLBACK_PG_HOST=localhost
# GRAPHRAG_FALLBACK_PG_PORT=5432
# GRAPHRAG_FALLBACK_PG_DATABASE=atlas
# GRAPHRAG_FALLBACK_PG_USER=atlas
# GRAPHRAG_FALLBACK_PG_PASSWORD=your-password
# GRAPHRAG_FALLBACK_PG_TABLE=graphrag_documents

# ============================================
# GraphRAG Service Configuration
# ============================================

# Enable GraphRAG prompt enhancement
GRAPHRAG_ENABLED=true
# Maximum sources to include in context
GRAPHRAG_MAX_SOURCES=5
# Minimum confidence threshold
GRAPHRAG_MIN_CONFIDENCE=0.3
# Maximum context length (chars)
GRAPHRAG_MAX_CONTEXT_LENGTH=4000
